import{a as j,u as b,r as v,b as A,j as e,c as M,d as O,e as W,g as D,L as H,f as G,h as S,i as C,k as U,l as q,m as B}from"./index-GHKGSem7.js";import{i as K}from"./index-kYIZB4Wr.js";import{F as Y,P as J}from"./ProductGrid-CQDXoT7W.js";import{R as Q}from"./Rating-Vplpr7Ic.js";function X(t,l=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(l)}function Z(t,l=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(l)}function _(t,l="expected all items to be functions, instead received the following types: "){if(!t.every(i=>typeof i=="function")){const i=t.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${l}[${i}]`)}}var k=t=>Array.isArray(t)?t:[t];function ee(t){const l=Array.isArray(t[0])?t[0]:t;return _(l,"createSelector expects all input-selectors to be functions, but received the following types: "),l}function te(t,l){const i=[],{length:n}=t;for(let s=0;s<n;s++)i.push(t[s].apply(null,l));return i}var se=class{constructor(t){this.value=t}deref(){return this.value}},re=typeof WeakRef<"u"?WeakRef:se,ne=0,P=1;function y(){return{s:ne,v:void 0,o:null,p:null}}function E(t,l={}){let i=y();const{resultEqualityCheck:n}=l;let s,c=0;function d(){var h;let r=i;const{length:o}=arguments;for(let f=0,a=o;f<a;f++){const x=arguments[f];if(typeof x=="function"||typeof x=="object"&&x!==null){let m=r.o;m===null&&(r.o=m=new WeakMap);const g=m.get(x);g===void 0?(r=y(),m.set(x,r)):r=g}else{let m=r.p;m===null&&(r.p=m=new Map);const g=m.get(x);g===void 0?(r=y(),m.set(x,r)):r=g}}const u=r;let p;if(r.s===P)p=r.v;else if(p=t.apply(null,arguments),c++,n){const f=((h=s==null?void 0:s.deref)==null?void 0:h.call(s))??s;f!=null&&n(f,p)&&(p=f,c!==0&&c--),s=typeof p=="object"&&p!==null||typeof p=="function"?new re(p):p}return u.s=P,u.v=p,p}return d.clearCache=()=>{i=y(),d.resetResultsCount()},d.resultsCount=()=>c,d.resetResultsCount=()=>{c=0},d}function ce(t,...l){const i=typeof t=="function"?{memoize:t,memoizeOptions:l}:t,n=(...s)=>{let c=0,d=0,r,o={},u=s.pop();typeof u=="object"&&(o=u,u=s.pop()),X(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const p={...i,...o},{memoize:h,memoizeOptions:f=[],argsMemoize:a=E,argsMemoizeOptions:x=[],devModeChecks:m={}}=p,g=k(f),I=k(x),N=ee(s),w=h(function(){return c++,u.apply(null,arguments)},...g),L=a(function(){d++;const $=te(N,arguments);return r=w.apply(null,$),r},...I);return Object.assign(L,{resultFunc:u,memoizedResultFunc:w,dependencies:N,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>r,recomputations:()=>c,resetRecomputations:()=>{c=0},memoize:h,argsMemoize:a})};return Object.assign(n,{withTypes:()=>n}),n}var V=ce(E),le=Object.assign((t,l=V)=>{Z(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const i=Object.keys(t),n=i.map(c=>t[c]);return l(n,(...c)=>c.reduce((d,r,o)=>(d[i[o]]=r,d),{}))},{withTypes:()=>le});const ie=()=>{let{categories:t,loading:l}=j(a=>a.categories);const{filters:{category:i,maxPrice:n,minPrice:s}}=j(a=>a.filter),c=b();t=["all",...t];const[d,r]=v.useState(""),[o,u]=v.useState("");v.useEffect(()=>{c(A())},[c]);const p=a=>a.charAt(0).toUpperCase()+a.slice(1),h=()=>{c(W(o,d)),console.log(s,n)},f=()=>{c(D()),r(""),u("")};return l?e.jsx(M,{}):e.jsxs("div",{className:"lg:sticky top-40",children:[e.jsxs("div",{className:"category block",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Categories"}),e.jsx("div",{className:"p-3",children:t.map((a,x)=>e.jsx("button",{className:`w-auto lg:w-full lg:p-1 m-1  p-2 text-left hover:bg-green-500 hover:text-white  ${i===a.toLowerCase()?"bg-green-500 text-white ":"lg:bg-transparent bg-gray-300"}`,onClick:()=>c(O(a==="All"?"":a)),children:p(a)},x))})]}),e.jsxs("div",{className:"price-range-block mb-7",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Price Range"}),e.jsxs("div",{className:"p-3  ",children:[e.jsxs("div",{className:"flex gap-2 align-center justify-center",children:[e.jsx("input",{type:"number",placeholder:"Min",className:"w-full border border-gray-300 p-1",value:o,onChange:a=>u(a.target.value?Number(a.target.value):"")}),e.jsx("input",{type:"number",placeholder:"Max",className:"w-full border border-gray-300 p-1",value:d,onChange:a=>r(a.target.value?Number(a.target.value):"")})]}),e.jsx("button",{className:"w-full bg-green-500 text-white mt-3 hover:bg-green-600 p-1",onClick:()=>h(),children:"Apply"})]})]}),e.jsx("div",{className:"my-3",children:e.jsx("button",{className:"bg-red-500 hover:bg-red-600 text-white p-2 w-full",onClick:()=>f(),children:"Clear Filters"})})]})},ae=t=>t.filter.filters||{},oe=t=>t.products.products||[],de=t=>t.filter.sortProduct||"best-match",ue=t=>t.filter.search||"",F=V([ae,oe,de,ue],(t,l,i,n)=>{const{category:s,maxPrice:c,minPrice:d}=t;let r=[...l];switch(s&&s!=="all"&&(r=r.filter(o=>o.category===s)),r=r.filter(o=>o.price>=d&&o.price<=(c||1/0)),i){case"price-lowest":r.sort((o,u)=>o.price-u.price);break;case"price-highest":r.sort((o,u)=>u.price-o.price)}return n&&(r=r.filter(o=>o.title.toLowerCase().includes(n.toLowerCase()))),r}),pe=({products:t})=>e.jsx(e.Fragment,{children:t.map(({id:l,image:i,title:n,price:s,rating:c,category:d,description:r})=>e.jsx(H,{to:`/product/${l}`,className:" block  p-5 hover:shadow-xl",children:e.jsxs("div",{className:"flex gap-8 items-start m-3",children:[e.jsx("div",{className:"w-[200px] h-[200px] flex-shrink-0",children:e.jsx("img",{className:"w-full h-full object-contain",src:i,alt:n})}),e.jsx("div",{children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between py-5",children:[e.jsx("div",{className:"category text-gray-500",children:e.jsx("span",{children:d})}),e.jsxs("div",{className:"reviews flex",children:[e.jsx(Y,{}),e.jsxs("span",{className:"pl-2",children:[" ",c.count]})]})]}),e.jsxs("div",{className:" pb-5",children:[e.jsx("h1",{className:"text-cyan-800 text-xl font-bold py-2",children:n}),e.jsx("p",{className:"text-gray-500",children:r.length>150?r.slice(0,150)+"...":r})]}),e.jsxs("div",{className:"text-red-600 text-2xl font-semibold flex justify-between items-center",children:[e.jsxs("h3",{children:["$",s]}),e.jsx("div",{className:"text-yellow-500 text-xl",children:e.jsx(Q,{name:"half-rating-read",defaultValue:c.rate,precision:.5,readOnly:!0})})]})]})})]})},l))}),fe=()=>{const t=b(),{loading:l,error:i}=j(c=>c.products),n=j(F),{gridView:s}=j(c=>c.filter);return v.useEffect(()=>{t(G())},[t]),l?e.jsx(M,{}):i?e.jsx("h1",{children:i}):n.length===0?e.jsxs("div",{className:"flex items-center flex-col justify-center h-[calc(100vh-260px)]",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-500",children:"No products found"}),e.jsx("p",{className:"text-gray-500",children:"You might spell wrong, try using different keyword"})]}):s===!0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5 my-5",children:e.jsx(J,{products:n})}):e.jsx("div",{children:e.jsx(pe,{products:n})})},R=S(e.jsx("path",{d:"M3 13h8V3H3zm0 8h8v-6H3zm10 0h8V11h-8zm0-18v6h8V3z"}),"Dashboard"),z=S(e.jsx("path",{d:"M3 14h4v-4H3zm0 5h4v-4H3zM3 9h4V5H3zm5 5h13v-4H8zm0 5h13v-4H8zM8 5v4h13V5z"}),"ViewList"),xe=()=>{const t=j(F),{sortProduct:l,gridView:i}=j(s=>s.filter),n=b();return v.useEffect(()=>{const s=()=>{window.innerWidth<640&&n(C())};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},[n]),e.jsxs("div",{className:"mb-4 flex items-center justify-between flex-wrap",children:[e.jsxs("div",{className:"flex gap-1 text-lg flex items-center ",children:[e.jsx("p",{className:"text-gray-400 ",children:"View: "}),e.jsx("button",{onClick:()=>n(C()),className:"mx-2",children:i?e.jsx(R,{className:"text-black grid-icon"}):e.jsx(R,{className:"text-gray-400"})}),e.jsx("button",{onClick:()=>n(U()),className:"hidden sm:block",children:i?e.jsx(z,{className:"text-gray-400"}):e.jsx(z,{className:"text-black list-icon"})})]}),e.jsxs("div",{className:"flex gap-2 text-gray-500 text-center",children:[t.length," ",e.jsxs("p",{children:[t.length>1?"items":"item"," found"]})]}),e.jsx("div",{className:"line xl:w-[400px] h-[4px] lg:w-[350px] md:none bg-red-500 mx-2"}),e.jsx("select",{name:"sort",onClick:s=>n(q(s.target.value)),className:"px-1 md:px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:B.map((s,c)=>e.jsx("option",{value:s.value,children:s.label},c))})]})},ve=()=>e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Product"}),e.jsxs("div",{className:"lg:grid grid-cols-6 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(ie,{})}),e.jsxs("div",{className:"col-span-5",children:[e.jsx(xe,{}),e.jsx(fe,{})]})]})]});export{ve as default};
